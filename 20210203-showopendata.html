<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
	<script src="js/jquery-2.1.0.min.js"></script>
	<script src="js/jquery.mobile-1.4.5.min.js"></script>
	<script>
		$(function(){
			$.ajax({
				type:"GET",
				url:"20210203-GET-opendata.php",
				dataType:"json",   //用ajax 內建dataType排版 json資料
				success:showdata,
				error:function(){
					alert("error-20210203-GET-opendata.php");
				}
			});
		});
		function showdata(data){
			console.log(data);
			for(var i=0;i<10;i++){              //使用迴圈將json資料讀入 data.length=>矩陣長度
				// console.log(data[i]["Name"]);
				// var strHTML='<li ><a href="#"><img src="'+data[i]["PicURL"]+'" alt="" ><h3>'+data[i]["Name"]+'</h3><p>'+data[i]["Address"]+'</p><span class="ui-li-count">'+data[i]["City"]+'</span></a><a href="tel:'+data[i]["Tel"]+'" data-icon="phone">'+data[i]["Tel"]+'</a></li>';                                                   //定義HTML語法字串
				var strHTML='<li ><a href="#"><img src="'+data[i]["PicURL"]+'" alt="" ><h3>'+data[i]["Name"]+'</h3><p>'+data[i]["Address"]+'</p><span class="ui-li-count">'+data[i]["City"]+'</span></a><a href="https://www.google.com/maps/search/'+data[i]["Address"]+'" data-icon="location">地圖</a>';

				$("#foodlist").append(strHTML);    //用.append()插（加）入html語法字串 而不是.html()
			}
			$("#foodlist").listview("refresh");     //用listview("refresh") 重新刷新listvieww以加快載入速度。
		}
	</script>
</head>
<body>
	<div data-role="page" id="home">
		<div data-role="header" data-position="fixed" data-theme="b">
			<h1>首頁	</h1>
		</div>
		<div role="main" class="ui-content">
			<!-- list-view 應用 -->
			<ul data-role="listview" data-filter="true" data-filter-placeholder="請輸入關鍵字尋找!" data-inset="true" id="foodlist">
				<li data-role="list-divider" data-theme="b">鄉鎮美食地圖</li>
				<li >
					<a href="#"><img src="images/small-note20.png" alt="" >
						<h3>
							餐廳名稱
						</h3>
						<p>
							餐廳地址
						</p>
						<span class="ui-li-count">城鎮位置</span>
					</a>
					<a href="https://www.google.com/maps/place/" data-icon="phone">地圖</a>
				</li>
			</ul>
		</div>
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>頁尾	</h1>
		</div>
	</div>
</body>
</html>